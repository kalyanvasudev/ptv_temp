


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pytorchvideo.data.clip_sampling &mdash; PyTorchVideo  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.png"/>
  
  
  
    <link rel="canonical" href="https://pytorchvideo.org/docs/_modules/pytorchvideo/data/clip_sampling.html"/>
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <!-- <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" /> -->
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

  <!-- Preload the theme fonts -->

<link rel="preload" href="../../../_static/fonts/FreightSans/freight-sans-book.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../../../_static/fonts/FreightSans/freight-sans-medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../../../_static/fonts/IBMPlexMono/IBMPlexMono-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../../../_static/fonts/FreightSans/freight-sans-bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../../../_static/fonts/FreightSans/freight-sans-medium-italic.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../../../_static/fonts/IBMPlexMono/IBMPlexMono-SemiBold.woff2" as="font" type="font/woff2" crossorigin="anonymous">

<!-- Preload the katex fonts -->

<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Caligraphic-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css" integrity="sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu" crossorigin="anonymous">
</head>

<div class="container-fluid header-holder tutorials-header" id="header-holder">
  <div class="container">
    <div class="header-container">
      <a class="header-logo" href="https://pytorchvideo.org" aria-label="PyTorch"></a>

      <div class="main-menu">
        <ul>
          <li>
            <a href="https://pytorchvideo.org">Home</a>
          </li>
          <li>
            <a href="https://pytorchvideo.org/docs/tutorial_overview">Tutorials</a>
          </li>
          <li>
            <a href="https://github.com/facebookresearch/pytorchvideo/">Github</a>
          </li>
        </ul>
      </div>

      <a class="main-menu-open-button" href="#" data-behavior="open-mobile-menu"></a>
    </div>
  </div>
</div>


<body class="pytorch-body">

   

    

    <div class="table-of-contents-link-wrapper">
      <span>Table of Contents</span>
      <a href="#" class="toggle-table-of-contents" data-behavior="toggle-table-of-contents"></a>
    </div>

    <nav data-toggle="wy-nav-shift" class="pytorch-left-menu" id="pytorch-left-menu">
      <div class="pytorch-side-scroll">
        <div class="pytorch-menu pytorch-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          <div class="pytorch-left-menu-search">
            

            
              
              
            

            


  


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search Docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

            
          </div>

          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Models</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/models.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/model_zoo.html">Model Zoo and Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/models/index.html">Models API</a></li>
</ul>
<p class="caption"><span class="caption-text">Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/data.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/data_preparation.html">Data Preparation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/data/index.html">Data API</a></li>
</ul>
<p class="caption"><span class="caption-text">Transforms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/transforms.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/transforms/index.html">Transforms API</a></li>
</ul>
<p class="caption"><span class="caption-text">Layers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/layers.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/layers/index.html">Layers API</a></li>
</ul>
<p class="caption"><span class="caption-text">Accelerator</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/accelerator.html">Overview</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <div class="pytorch-container">
      <div class="pytorch-page-level-bar" id="pytorch-page-level-bar">
        <div class="pytorch-breadcrumbs-wrapper">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="pytorch-breadcrumbs">
    
      <li>
        <a href="../../../index.html">
          
            Docs
          
        </a> &gt;
      </li>

        
          <li><a href="../../index.html">Module code</a> &gt;</li>
        
      <li>pytorchvideo.data.clip_sampling</li>
    
    
      <li class="pytorch-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
</div>
        </div>

        <div class="pytorch-shortcuts-wrapper" id="pytorch-shortcuts-wrapper">
          Shortcuts
        </div>
      </div>

      <section data-toggle="wy-nav-shift" id="pytorch-content-wrap" class="pytorch-content-wrap">
        <div class="pytorch-content-left">

        
          
          <div class="rst-content">
          
            <div role="main" class="main-content" itemscope="itemscope" itemtype="http://schema.org/Article">
             <article itemprop="articleBody" id="pytorch-article" class="pytorch-article">
              
  <h1>Source code for pytorchvideo.data.clip_sampling</h1><div class="highlight"><pre>
<span></span><span class="c1"># Copyright (c) Facebook, Inc. and its affiliates. All Rights Reserved.</span>

<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">NamedTuple</span>


<div class="viewcode-block" id="ClipInfo"><a class="viewcode-back" href="../../../api/data/extra.html#pytorchvideo.data.clip_sampling.ClipInfo">[docs]</a><span class="k">class</span> <span class="nc">ClipInfo</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Named-tuple for clip information with:</span>
<span class="sd">        clip_start_sec  (float): clip start time.</span>
<span class="sd">        clip_end_sec (float): clip end time.</span>
<span class="sd">        clip_index (int): clip index in the video.</span>
<span class="sd">        aug_index (int): augmentation index for the clip. Different augmentation methods</span>
<span class="sd">            might generate multiple views for the same clip.</span>
<span class="sd">        is_last_clip (bool): a bool specifying whether there are more clips to be</span>
<span class="sd">            sampled from the video.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">clip_start_sec</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">clip_end_sec</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">clip_index</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">aug_index</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">is_last_clip</span><span class="p">:</span> <span class="nb">bool</span></div>


<div class="viewcode-block" id="ClipSampler"><a class="viewcode-back" href="../../../api/data/extra.html#pytorchvideo.data.clip_sampling.ClipSampler">[docs]</a><span class="k">class</span> <span class="nc">ClipSampler</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Interface for clip sampler&#39;s which take a video time, previous sampled clip time,</span>
<span class="sd">    and returns a named-tuple `ClipInfo`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clip_duration</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clip_duration</span> <span class="o">=</span> <span class="n">clip_duration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_clip_index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_aug_index</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">last_clip_time</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">video_duration</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ClipInfo</span><span class="p">:</span>
        <span class="k">pass</span></div>


<div class="viewcode-block" id="make_clip_sampler"><a class="viewcode-back" href="../../../api/data/extra.html#pytorchvideo.data.clip_sampling.make_clip_sampler">[docs]</a><span class="k">def</span> <span class="nf">make_clip_sampler</span><span class="p">(</span><span class="n">sampling_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ClipSampler</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructs the clip samplers found in this module from the given arguments.</span>
<span class="sd">    Args:</span>
<span class="sd">        sampling_type (str): choose clip sampler to return. It has two options:</span>
<span class="sd">            - uniform: constructs and return UniformClipSampler</span>
<span class="sd">            - random: construct and return RandomClipSampler</span>
<span class="sd">        *args: the args to pass to the chosen clip sampler constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">sampling_type</span> <span class="o">==</span> <span class="s2">&quot;uniform&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">UniformClipSampler</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">sampling_type</span> <span class="o">==</span> <span class="s2">&quot;random&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">RandomClipSampler</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">sampling_type</span> <span class="o">==</span> <span class="s2">&quot;constant_clips_per_video&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ConstantClipsPerVideoSampler</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">sampling_type</span><span class="si">}</span><span class="s2"> not supported&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="UniformClipSampler"><a class="viewcode-back" href="../../../api/data/extra.html#pytorchvideo.data.clip_sampling.UniformClipSampler">[docs]</a><span class="k">class</span> <span class="nc">UniformClipSampler</span><span class="p">(</span><span class="n">ClipSampler</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Evenly splits the video into clips of size clip_duration.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clip_duration</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">clip_duration</span><span class="p">)</span>

<div class="viewcode-block" id="UniformClipSampler.__call__"><a class="viewcode-back" href="../../../api/data/extra.html#pytorchvideo.data.clip_sampling.UniformClipSampler.__call__">[docs]</a>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">last_clip_time</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">video_duration</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ClipInfo</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            last_clip_time (float): the last clip end time sampled from this video. This</span>
<span class="sd">                should be 0.0 if the video hasn&#39;t had clips sampled yet.</span>
<span class="sd">                segments, clip_index is the segment index to sample.</span>
<span class="sd">            video_duration: (float): the duration of the video that&#39;s being sampled in seconds</span>
<span class="sd">        Returns:</span>
<span class="sd">            a named-tuple `ClipInfo`: includes the clip information of (clip_start_time,</span>
<span class="sd">                clip_end_time, clip_index, aug_index, is_last_clip), where the times are in</span>
<span class="sd">                seconds and is_last_clip is False when there is still more of time in the video</span>
<span class="sd">                to be sampled.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">clip_start_sec</span> <span class="o">=</span> <span class="n">last_clip_time</span>
        <span class="n">clip_end_sec</span> <span class="o">=</span> <span class="n">clip_start_sec</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clip_duration</span>
        <span class="n">clip_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_clip_index</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_clip_index</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">is_last_clip</span> <span class="o">=</span> <span class="p">(</span><span class="n">clip_end_sec</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clip_duration</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">video_duration</span>
        <span class="k">return</span> <span class="n">ClipInfo</span><span class="p">(</span><span class="n">clip_start_sec</span><span class="p">,</span> <span class="n">clip_end_sec</span><span class="p">,</span> <span class="n">clip_index</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">is_last_clip</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="RandomClipSampler"><a class="viewcode-back" href="../../../api/data/extra.html#pytorchvideo.data.clip_sampling.RandomClipSampler">[docs]</a><span class="k">class</span> <span class="nc">RandomClipSampler</span><span class="p">(</span><span class="n">ClipSampler</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Randomly samples clip of size clip_duration from the videos.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clip_duration</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">clip_duration</span><span class="p">)</span>

<div class="viewcode-block" id="RandomClipSampler.__call__"><a class="viewcode-back" href="../../../api/data/extra.html#pytorchvideo.data.clip_sampling.RandomClipSampler.__call__">[docs]</a>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">last_clip_time</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">video_duration</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ClipInfo</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            last_clip_time (float): Not used for RandomClipSampler.</span>
<span class="sd">            video_duration: (float): the duration (in seconds) for the video that&#39;s</span>
<span class="sd">                being sampled</span>
<span class="sd">        Returns:</span>
<span class="sd">            a named-tuple `ClipInfo`: includes the clip information of (clip_start_time,</span>
<span class="sd">                clip_end_time, clip_index, aug_index, is_last_clip). The times are in seconds.</span>
<span class="sd">                clip_index, aux_index and is_last_clip are always 0, 0 and True, respectively.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">max_possible_clip_start</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">video_duration</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clip_duration</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">clip_start_sec</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_possible_clip_start</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ClipInfo</span><span class="p">(</span>
            <span class="n">clip_start_sec</span><span class="p">,</span> <span class="n">clip_start_sec</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clip_duration</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">True</span>
        <span class="p">)</span></div></div>


<div class="viewcode-block" id="ConstantClipsPerVideoSampler"><a class="viewcode-back" href="../../../api/data/extra.html#pytorchvideo.data.clip_sampling.ConstantClipsPerVideoSampler">[docs]</a><span class="k">class</span> <span class="nc">ConstantClipsPerVideoSampler</span><span class="p">(</span><span class="n">ClipSampler</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Evenly splits the video into clips_per_video increments and samples clips of size</span>
<span class="sd">    clip_duration at these increments.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">clip_duration</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">clips_per_video</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">augs_per_clip</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">clip_duration</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clips_per_video</span> <span class="o">=</span> <span class="n">clips_per_video</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_augs_per_clip</span> <span class="o">=</span> <span class="n">augs_per_clip</span>

<div class="viewcode-block" id="ConstantClipsPerVideoSampler.__call__"><a class="viewcode-back" href="../../../api/data/extra.html#pytorchvideo.data.clip_sampling.ConstantClipsPerVideoSampler.__call__">[docs]</a>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">last_clip_time</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">video_duration</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ClipInfo</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            last_clip_time (float): Not used for ConstantClipsPerVideoSampler.</span>
<span class="sd">            video_duration: (float): the duration (in seconds) for the video that&#39;s</span>
<span class="sd">                being sampled.</span>
<span class="sd">        Returns:</span>
<span class="sd">            a named-tuple `ClipInfo`: includes the clip information of (clip_start_time,</span>
<span class="sd">                clip_end_time, clip_index, aug_index, is_last_clip). The times are in seconds.</span>
<span class="sd">                is_last_clip is True after clips_per_video clips have been sampled or the end</span>
<span class="sd">                of the video is reached.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">max_possible_clip_start</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">video_duration</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clip_duration</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">uniform_clip</span> <span class="o">=</span> <span class="n">max_possible_clip_start</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clips_per_video</span>
        <span class="n">clip_start_sec</span> <span class="o">=</span> <span class="n">uniform_clip</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_clip_index</span>
        <span class="n">clip_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_clip_index</span>
        <span class="n">aug_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_aug_index</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_current_aug_index</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_aug_index</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_augs_per_clip</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_current_clip_index</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_current_aug_index</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># Last clip is True if sampled self._clips_per_video or if end of video is reached.</span>
        <span class="n">is_last_clip</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_current_clip_index</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clips_per_video</span>
            <span class="ow">or</span> <span class="n">uniform_clip</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_clip_index</span> <span class="o">&gt;</span> <span class="n">max_possible_clip_start</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_current_clip_index</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">is_last_clip</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">return</span> <span class="n">ClipInfo</span><span class="p">(</span>
            <span class="n">clip_start_sec</span><span class="p">,</span>
            <span class="n">clip_start_sec</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clip_duration</span><span class="p">,</span>
            <span class="n">clip_index</span><span class="p">,</span>
            <span class="n">aug_index</span><span class="p">,</span>
            <span class="n">is_last_clip</span><span class="p">,</span>
        <span class="p">)</span></div></div>
</pre></div>

             </article>
             
            </div>
            <!-- <footer>
  

  

    <hr>

  

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, PyTorchVideo contributors.

    </p>
  </div>
    
      <div>
        Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
      </div>
     

</footer>
 -->
          </div>
        </div>

        <div class="pytorch-content-right" id="pytorch-content-right">
          <div class="pytorch-right-menu" id="pytorch-right-menu">
            <div class="pytorch-side-scroll" id="pytorch-side-scroll-right">
              
            </div>
          </div>
        </div>
      </section>
    </div>

  


  

     
       <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
         <script src="../../../_static/jquery.js"></script>
         <script src="../../../_static/underscore.js"></script>
         <script src="../../../_static/doctools.js"></script>
         <script src="../../../_static/language_data.js"></script>
     

  

  <script type="text/javascript" src="../../../_static/js/vendor/popper.min.js"></script>
  <script type="text/javascript" src="../../../_static/js/vendor/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
  <script type="text/javascript" src="../../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

  <!-- Begin Footer -->


  <div class="cookie-banner-wrapper">
  <div class="container">
    <p class="gdpr-notice">To analyze traffic and optimize your experience, we serve cookies on this site. By clicking or navigating, you agree to allow our usage of cookies. As the current maintainers of this site, Facebook’s Cookies Policy applies. Learn more, including about available controls: <a href="https://www.facebook.com/policies/cookies/">Cookies Policy</a>.</p>
    <img class="close-button" src="../../../_static/images/pytorch-x.svg">
  </div>
</div>

  <!-- End Footer -->

  <!-- Begin Mobile Menu -->

  <div class="mobile-main-menu">
    <div class="container-fluid">
      <div class="container">
        <div class="mobile-main-menu-header-container">
          <a class="header-logo" href="https://pytorchvideo.org" aria-label="PyTorch"></a>
          <a class="main-menu-close-button" href="#" data-behavior="close-mobile-menu"></a>
        </div>
      </div>
    </div>

    <div class="mobile-main-menu-links-container">
      <div class="main-menu">
        <ul>
          <li>
            <a href="https://pytorchvideo.org">Home</a>
          </li>
          <li>
            <a href="https://pytorchvideo.org/docs/tutorial_overview">Tutorials</a>
          </li>
          <li>
            <a href="https://github.com/facebookresearch/pytorchvideo/">Github</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <!-- End Mobile Menu -->

  <script type="text/javascript" src="../../../_static/js/vendor/anchor.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function() {
      mobileMenu.bind();
      mobileTOC.bind();
      pytorchAnchors.bind();
      sideMenus.bind();
      scrollToAnchor.bind();
      highlightNavigation.bind();
      mainMenuDropdown.bind();
      filterTags.bind();

      // Add class to links that have code blocks, since we cannot create links in code blocks
      $("article.pytorch-article a span.pre").each(function(e) {
        $(this).closest("a").addClass("has-code");
      });
    })
  </script>
</body>
</html>